<!DOCTYPE html>
<html>
    <head>
    <!-- Title -->
    
    <title>
        Ruby_基础语法总结篇 | 云枫飒的笔记BLOG
    </title>
    
    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">
    
    <!-- Meta & INfo -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="yunfengsa">
    <meta name="description" content="Nothing can stop me moving on!">
    <meta name="keywords" content="null">
    
    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="云枫飒的笔记BLOG">
    
    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yunfengsa.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Ruby_基础语法总结篇 | 云枫飒的笔记BLOG">
    <meta property="og:description" content="Nothing can stop me moving on!">
    
     <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">
        
        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->
    
    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
	body, html{
		font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
	}
	
    a{
        color: #00838F
    }
    
    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #0097A7 !important
    }
    
	/* Sidebar User Drop Down Menu Text Color */
	#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus{
        color: #0097A7 !important
    }
    
    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a{
        color: #0097A7 !important
    }
    
    .toTop{
        background: #757575 !important
    }
		
	.material-layout .material-post>.material-nav,
	.material-layout .material-index>.material-nav,
	.material-nav a{
		color: #757575;
	}
		
	#scheme-Paradox .MD-burger-layer {
		background-color: #757575;
	}

	#scheme-Paradox #post-toc-trigger-btn{
		color: #757575;
	}
	
	.post-toc a:hover{
		color: #00838F;
		text-decoration: underline;
	}
</style>


<!-- Theme Background Related-->

    <style>
        body{
            background-color: #F5F5F5
        }
		
		/* blog_info bottom background */
        #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
            background-color: #fff;
        }
    </style>




<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>

	<script src="/js/jquery.min.js"></script>
	
	<link rel="stylesheet" href="/css/highlight/solarized-white.css">
	
	<!-- UC Browser Compatible-->
	<script>
		var agent = navigator.userAgent.toLowerCase();
		if(agent.indexOf('ucbrowser')>0) {
			document.write('<link rel="stylesheet" href="/css/uc.css">');
		   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
		}
	</script>
    
    <!-- Custom Head -->
    
</head>
	
	

    <body id="scheme-Paradox">

		
        <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
				
			
			
            <!-- Main Container -->
            <main class="material-layout__content" id="main">
				
                <!-- Top Anchor -->
                <div id="top"></div>
				
				
                <!-- Hamburger Button -->
                <button class="MD-burger-icon sidebar-toggle">
                    <span class="MD-burger-layer"></span>
                </button>
				
				
                <!-- Post TOC -->

    
	<!-- Back Button -->
<!--
	<div class="material-back" id="backhome-div" tabindex="0">
		<a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="#" onclick="window.history.back();return false;" target="_self" role="button" data-upgraded=",MaterialButton,MaterialRipple">
			<i class="material-icons" role="presentation">arrow_back</i>
			<span class="mdl-button__ripple-container">
				<span class="mdl-ripple"></span>
			</span>
		</a>
	</div>			
-->
	<!-- Left aligned menu below button -->
	<button id="post-toc-trigger-btn"
			class="mdl-button mdl-js-button mdl-button--icon">
	  <i class="material-icons">format_list_numbered</i>
	</button>

	<ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect"
		for="post-toc-trigger-btn">
			
			
		
<!--			<li class="mdl-menu__item">Some Action</li>-->
	</ul>



<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">
		
        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
	<!-- Paradox Post Header -->
	
		
			<!-- Random Thumbnail -->
			<div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
				<script>
    
    var randomNum;
    randomNum = Math.floor(Math.random() * 5 + 1);
    
    $(".post_thumbnail-random").css('background-image', 'url(' + '/img/random/' + randomNum + '.png' + ')');
    
</script>

		
	
        <p class="article-headline-p">
            Ruby_基础语法总结篇
        </p>
    </div>

	

				
				
					<!-- Paradox Post Info -->
					<div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
    
    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>yunfengsa</strong>
        <span>10月 30, 2015</span>
    </div>
    
    <div class="section-spacer"></div>
	
    <!-- Favorite -->
<!--
    <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
        <i class="material-icons" role="presentation">favorite</i>
        <span class="visuallyhidden">favorites</span>
    </button>
-->
    
    <!-- Tags (bookmark) -->
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Ruby/">Ruby</a>
    </ul>
    
    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    
    
    
    
    <!-- Share Twitter -->
    <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Ruby_基础语法总结篇&url=http://yunfengsa.github.io//2015/10/30/ruby-jichuyufa/index.html&via=yunfengsa" target="_blank">
        <li class="mdl-menu__item">
            分享到 Twitter
        </li>
    </a>
    
    <!-- Share Google+ -->
    <a class="post_share-link" href="https://plus.google.com/share?url=http://yunfengsa.github.io//2015/10/30/ruby-jichuyufa/index.html" target="_blank">
        <li class="mdl-menu__item">
            分享到 Google+
        </li>
    </a>
    
    <!-- Share Weibo -->
    <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Ruby_基础语法总结篇&url=http://yunfengsa.github.io//2015/10/30/ruby-jichuyufa/index.html&pic=&searchPic=false&style=simple" target="_blank">
        <li class="mdl-menu__item">
            分享到微博
        </li>
    </a>
</ul>
</div>
				

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
	
		<p>车爱讴歌,言说Ruby,想想真是…(日le gou le,本ren jue dui ai dang,货mai guo huo)<br><br><br>小白开启ruby之旅</p>
<p>###1.变量<br><strong>局部变量</strong> </p>
<ol>
<li><p>命名规则：以小写字母或者下划线开头；</p>
</li>
<li><p>Ruby中的方法调用也是以小写字母或下划线开头，而且调用的方法如果没有参数，则可以省略方法后的括号；</p>
</li>
<li><p>局部变量的定义：类、模块、方法的内部，当我们对一个以小写字母开头的变量进行赋值时，就声明了一个局部变量；离开范围局部变量消失；</p>
</li>
<li><p>允许定义顶层局部变量，但在类、方法、模块定义内仍无法访问该变量；</p>
</li>
<li><p>局部变量不可以在内部类、子类中访问；类中的方法不可以访问该类中定义的局部变量（平级）；；</p>
</li>
<li><p>在声明局部变量的类、模块、方法内，局部变量从声明该变量处开始生效，随类、方法、模块的定义结束而结束；</p>
</li>
</ol>
<p><strong>$开头：全局变量（Global variable）</strong></p>
<ol>
<li><p>命名规则：以“$”开头；可以在任何地方访问；</p>
</li>
<li><p>通常应避免使用全局变量，因为它的使用会引起各模块间的高耦合。</p>
</li>
<li><p>全局变量无需声明，引用尚未初始化的全局变量，其值为nil；</p>
</li>
<li><p>定义：可以在类、模块、方法的定义中进行全局变量的定义；</p>
</li>
<li><p>全局变量的作用范围是从全局变量的定义语句开始，直到程序结束；</p>
</li>
<li><p>动态语言的特征：当定义一个方法时，该方法根本不会被解释，只有真正调用该方法时，该方法才会被解释。</p>
</li>
<li><p>Ruby提供了一系列常用的全局变量；如；错误为止，解释器进程ID；</p>
</li>
</ol>
<p><strong>@开头：实例变量（Instance variable）</strong></p>
<ol>
<li><p>命名规则：以“@”开头；每个实例变量都是在第一次出现时动态加入对象；</p>
</li>
<li><p>实例变量通常在方法中定义；当在方法中声明实例变量时，该实例变量事实上属于该方法所在的类，而不是该方法；虽然实例变量是属于类的，但大部分时候我们都是在该类的方法里定义实例变量；</p>
</li>
<li><p>Java在创建对象时一次为该对象的所有实例变量都分配了相应的内存空间；Ruby语言里的对象完全是动态的，创建对象时该对象没有任何实例变量，直到执行到为实例变量定义时，该对象才动态增加该实例变量；</p>
</li>
<li><p>生存范围：与该类对象的生存范围相同，只要该类对象存在，则该对象里的实例变量将一直存在；但局部变量则会随着方法的消亡而消亡（除非使用闭包）；</p>
</li>
<li><p>实例变量的访问范围总是：private，即在类定义内对实例变量的赋值和读取没有限制；在类外访问实例变量时，则可以通过方法来访问；</p>
</li>
<li><p>属性定义：1.用实例变量；2.用Module的方法（四个方法：attr，attr_reader，attr_writer，attr_accessor；示例：attr：color，true；）；</p>
</li>
<li><p>在模块中定义实例变量，目的是将该实例变量混入其他类中；（模块是无法创建实例的）；</p>
</li>
<li><p>类范围内定义的实例变量是Class对象的实例变量；</p>
</li>
<li><p>实例变量永远都不能暴露为public，只能通过类方法（类名.方法名）暴露；</p>
</li>
</ol>
<p><strong>@@开头：类变量（Class variable）类变量被共享在整个继承链中</strong></p>
<ol>
<li><p>命名规则：以“@@”开头；从第一次开始赋值的地方开始生效；</p>
</li>
<li><p>定义：可以在类、模块、方法的定义中定义类变量；（在方法中定义的变量只有在该方法被调用后，该类变量才会生效）</p>
</li>
<li><p>访问：可以在类中的特殊方法、实例方法等处对类变量进行引用和赋值；</p>
</li>
<li><p>类变量必须先定义，然后才可以使用，否则异常；</p>
</li>
<li><p>类变量的特殊性：一个类、其子类、它们的实例：的同名类变量共享了同一块内存区域（都引用了同一个变量）；</p>
</li>
<li><p>可以在模块中定义类变量，所有混入该模块的类，共享该模块中定义的类变量；仍然共享内存区域；</p>
</li>
<li><p>类变量与常量：</p>
</li>
</ol>
<p>　　*类变量可以重复赋值；常量重复赋值时发出警告（不是错误）；</p>
<p>　　*类变量默认是protected的，不能在类外部直接引用；（可在继承类中以用或赋值）；类变量与实例变量：</p>
<p>　　*在类范围内定义的类变量，可以在该类的方法中访问；而实例变量则不行；</p>
<p>　　*类变量可在子类中引用或赋值，但实例变量可在类范围内直接引用或赋值；</p>
<p><strong>大写字母开头：常数（Constant）</strong></p>
<p><strong>伪变量（只读）</strong></p>
<pre><code>1. self:当前接收器对象
2. true和false
3. nil:代表undefined的值
4. \_\_FILE__:当前源文件的名称
5. \_\_LINE__:当前行在源文件中的编号
</code></pre><a id="more"></a>
<p>###2.运算符</p>
<p>和一般性语言差别不大</p>
<p>###3.注释<br>当行注释:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby -w</span></div><div class="line"><span class="comment"># 这是一个单行注释。</span></div><div class="line">puts <span class="string">"Hello, Ruby!"</span></div></pre></td></tr></table></figure>
<p>多行注释:</p>
<p>您可以使用 =begin 和 =end 语法注释多行，如下所示：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby -w</span></div><div class="line"></div><div class="line">puts <span class="string">"Hello, Ruby!"</span></div><div class="line"></div><div class="line"><span class="comment">=begin</span></div><div class="line">这是一个多行注释。</div><div class="line">可扩展至任意数量的行。</div><div class="line">但 =begin 和 =end 只能出现在第一行和最后一行。 </div><div class="line">=end</div></pre></td></tr></table></figure>
<p>###4.基本逻辑</p>
<p>####判断<br><strong>if</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line">x=<span class="number">1</span></div><div class="line"><span class="keyword">if</span> x &gt; <span class="number">2</span></div><div class="line">   puts <span class="string">"x 大于 2"</span></div><div class="line"><span class="keyword">elsif</span> x &lt;= <span class="number">2</span> <span class="keyword">and</span> x!=<span class="number">0</span></div><div class="line">   puts <span class="string">"x 是 1"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">   puts <span class="string">"无法得知 x 的值"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><strong>unless</strong></p>
<p>和if的意思想法,如果conditon为false, 则执行code</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">x=<span class="number">1</span></div><div class="line"><span class="keyword">unless</span> x&gt;<span class="number">2</span></div><div class="line">   puts <span class="string">"x 小于 2"</span></div><div class="line"> <span class="keyword">else</span></div><div class="line">  puts <span class="string">"x 大于 2"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>以上的运行结果为</p>
<blockquote>
<p>x 小于 2</p>
</blockquote>
<p><strong>case</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">$age =  <span class="number">5</span></div><div class="line"><span class="keyword">case</span> $age</div><div class="line"><span class="keyword">when</span> <span class="number">0</span> .. <span class="number">2</span></div><div class="line">    puts <span class="string">"婴儿"</span></div><div class="line"><span class="keyword">when</span> <span class="number">3</span> .. <span class="number">6</span></div><div class="line">    puts <span class="string">"小孩"</span></div><div class="line"><span class="keyword">when</span> <span class="number">7</span> .. <span class="number">12</span></div><div class="line">    puts <span class="string">"child"</span></div><div class="line"><span class="keyword">when</span> <span class="number">13</span> .. <span class="number">18</span></div><div class="line">    puts <span class="string">"少年"</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    puts <span class="string">"其他年龄段的"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>运行结果为:</p>
<blockquote>
<p>小孩</p>
</blockquote>
<p>####循环</p>
<p><strong>while</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">$i = <span class="number">0</span></div><div class="line">$num = <span class="number">5</span></div><div class="line"></div><div class="line"><span class="keyword">while</span> $i &lt; $num  <span class="keyword">do</span></div><div class="line">   puts(<span class="string">"在循环语句中 i = #$i"</span> )</div><div class="line">   $i +=<span class="number">1</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">$i = <span class="number">0</span></div><div class="line">$num = <span class="number">5</span></div><div class="line"><span class="keyword">begin</span></div><div class="line">   puts(<span class="string">"在循环语句中 i = #$i"</span> )</div><div class="line">   $i +=<span class="number">1</span></div><div class="line"><span class="keyword">end</span> <span class="keyword">while</span> $i &lt; $num</div></pre></td></tr></table></figure>
<p><strong>until</strong></p>
<p>条件为false的时候执行代码,用法同while</p>
<p><strong>for</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..<span class="number">5</span></div><div class="line">   puts <span class="string">"局部变量的值为 <span class="subst">#&#123;i&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>等同于</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">(<span class="number">0</span>..<span class="number">5</span>).each <span class="keyword">do</span> <span class="params">|i|</span></div><div class="line">   puts <span class="string">"局部变量的值为 <span class="subst">#&#123;i&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><strong>break next retry redo</strong></p>
<p>break:退出循环<br>next:进入下一次的循环,只舍弃当前循环<br>retry:重新开始循环,参数也重新开始,如果出现在begin   rescue(这个等于java的try catch)中,则从begin重新开始.<br>redo:重新开始当前的循环,循环参数保持当前值.</p>
<p>###5.方法、块、模块（module）</p>
<p>####方法</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">method_name</span> <span class="params">(var1, var2)</span></span></div><div class="line">   expr..</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><strong>实例(一看秒懂)</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(a1=<span class="string">"Ruby"</span>, a2=<span class="string">"Perl"</span>)</span></span></div><div class="line">   puts <span class="string">"编程语言为 <span class="subst">#&#123;a1&#125;</span>"</span></div><div class="line">   puts <span class="string">"编程语言为 <span class="subst">#&#123;a2&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line">test <span class="string">"C"</span>, <span class="string">"C++"</span></div><div class="line">test</div></pre></td></tr></table></figure>
<p><strong>可变参数</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample</span> <span class="params">(*test)</span></span></div><div class="line">   puts <span class="string">"参数个数为 <span class="subst">#&#123;test.length&#125;</span>"</span></div><div class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...test.length</div><div class="line">      puts <span class="string">"参数值为 <span class="subst">#&#123;test[i]&#125;</span>"</span></div><div class="line">   <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line">sample <span class="string">"Zara"</span>, <span class="string">"6"</span>, <span class="string">"F"</span></div><div class="line">sample <span class="string">"Mac"</span>, <span class="string">"36"</span>, <span class="string">"M"</span>, <span class="string">"MCA"</span></div></pre></td></tr></table></figure>
<p><strong>类方法</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Accounts</span></span></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">reading_charge</span></span></div><div class="line">   <span class="keyword">end</span></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">Accounts</span>.<span class="title">return_date</span></span></div><div class="line">   <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>上述定义的类中的方法<code>Accounts.return_date</code>不需要实例化,也可在外部直接调用</p>
<p><strong>alias undef顾名思义</strong></p>
<p>#####块</p>
<p><strong>基本定义方法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">blockname&#123;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>基本用法</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span></span></div><div class="line">   <span class="keyword">yield</span> <span class="number">5</span></div><div class="line">   puts <span class="string">"在 test 方法内"</span></div><div class="line">   <span class="keyword">yield</span> <span class="number">100</span></div><div class="line"><span class="keyword">end</span></div><div class="line">test &#123;<span class="params">|i|</span> puts <span class="string">"你在块 <span class="subst">#&#123;i&#125;</span> 内"</span>&#125;</div></pre></td></tr></table></figure>
<p>块需要和def一起使用,yield只得就是调用当前定义的test块. yield后边可以不传递参数.</p>
<p><strong>BEGIN END</strong></p>
<p>每个 Ruby 源文件可以声明当文件被加载时要运行的代码块（BEGIN 块），以及程序完成执行后要运行的代码块（END 块）。</p>
<p>一个程序可以包含多个 BEGIN 和 END 块。BEGIN 块按照它们出现的顺序执行。END 块按照它们出现的相反顺序执行</p>
<p>####模块<br>模块（Module）定义了一个命名空间，相当于一个沙盒，在里边您的方法和常量不会与其他地方的方法常量冲突。<br>模块类似与类，但有一下不同：</p>
<ul>
<li>模块不能被实例化</li>
<li>模块没有子类</li>
<li>模块智能被另一个模块定义</li>
</ul>
<p>模块常量命名与类常量命名类似，以大写字母开头。方法定义看起来也相似：模块方法定义与类方法定义类似。<br>通过类方法，您可以在类方法名称前面放置模块名称和一个点号来调用模块方法，您可以使用模块名称和两个冒号来引用一个常量。</p>
<p><strong>require语句</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$LOAD_PATH &lt;&lt; <span class="string">'.'</span></div><div class="line"></div><div class="line"><span class="keyword">require</span> <span class="string">'trig.rb'</span></div><div class="line"><span class="keyword">require</span> <span class="string">'moral'</span></div><div class="line"></div><div class="line">y = Trig.sin(Trig::PI/<span class="number">4</span>)</div><div class="line">wrongdoing = Moral.sin(Moral::VERY_BAD)</div></pre></td></tr></table></figure>
<p>在这里，我们使用 <code>$LOAD_PATH &lt;&lt; &#39;.&#39;</code> 让 Ruby 知道必须在当前目录中搜索被引用的文件。如果您不想使用 $LOAD_PATH，那么您可以使用 require_relative 来从一个相对目录引用文件。</p>
<p>注意：在这里，文件包含相同的函数名称。所以，这会在引用调用程序时导致代码模糊，但是模块避免了这种代码模糊，而且我们可以使用模块的名称调用适当的函数。</p>
<p><strong>include语句</strong></p>
<p>您可以在类中嵌入模块。为了在类中嵌入模块，您可以在类中使用<em>include</em>语句.</p>
<p><em>如果模块是定义在一个单独的文件中，那么在嵌入模块之前就需要使用 <strong>require</strong> 语句引用该文件。</em></p>
<p><strong>Mixins</strong></p>
<p>一个类可以继承多个模块,模块之间可以多重继承</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">module</span> <span class="title">Mymodule</span></span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Mymodule</span>.<span class="title">out</span></span></div><div class="line">    puts <span class="string">"in Mymodule.out<span class="subst">#&#123;<span class="number">2</span>+<span class="number">4</span>&#125;</span>"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Mymodule</span>.<span class="title">arry</span></span></div><div class="line">    nums=Array.new(<span class="number">10</span>)&#123;</div><div class="line">      <span class="params">|e|</span>e=e*<span class="number">2</span></div><div class="line">    &#125;</div><div class="line">    linew=__LINE_<span class="number">_</span></div><div class="line">    puts(linew)</div><div class="line">    puts <span class="string">"<span class="subst">#&#123;nums&#125;</span>"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">Mymodule</span>.<span class="title">redo</span></span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..<span class="number">5</span></div><div class="line">      <span class="keyword">if</span> i &gt; <span class="number">2</span> <span class="keyword">then</span></div><div class="line">        puts <span class="string">"局部变量的值为 <span class="subst">#&#123;i&#125;</span>"</span></div><div class="line">        <span class="keyword">redo</span></div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"><span class="class"><span class="keyword">module</span> <span class="title">Mymodule2</span></span></div><div class="line">  <span class="keyword">include</span> Mymodule</div><div class="line">  Out=<span class="number">2</span></div><div class="line"><span class="keyword">end</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">method_test</span></span></div><div class="line">  <span class="keyword">yield</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line">method_test&#123;</div><div class="line">  puts(<span class="string">"in block---"</span>)</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Module_test</span></span></div><div class="line">  <span class="keyword">include</span> Mymodule</div><div class="line">  Mymodule.out</div><div class="line">  Mymodule.arry</div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Momoduletest2</span></span></div><div class="line">  <span class="keyword">include</span> Mymodule2</div><div class="line">  puts <span class="string">"-------"</span></div><div class="line">  puts Mymodule2::Out</div><div class="line">  Mymodule.arry</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>输出结果为</p>
<pre>
in block---
in Mymodule.out6
9
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
-------
2
9
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
</pre>

<p>###6. 字符串(String)<br>单引号可以直接引用一个简单的字符串<br> 双引号可以在其中计算一些方法值,比如<code>puts &quot;X+Y=#{2+3}&quot;</code>,会输出<code>X+Y=5</code></p>
<p><strong>字符编码</strong></p>
<p>默认的字符集是ASCII,可以通过</p>
<blockquote>
<p>$KCODE=’u’</p>
</blockquote>
<p>进行更改<br><br>下边是$KCODE的一些可能值</p>
<table>
<thead>
<tr>
<th>编码</th>
<th style="text-align:left">&nbsp;描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td style="text-align:left">ASCII</td>
</tr>
<tr>
<td>e</td>
<td style="text-align:left">EUC</td>
</tr>
<tr>
<td>n</td>
<td style="text-align:left">none(与a类似)</td>
</tr>
<tr>
<td>u</td>
<td style="text-align:left">UTF-8</td>
</tr>
</tbody>
</table>
<p>字符串的内建方法参考具体的文档即可 <a href="http://www.runoob.com/ruby/ruby-string.html" target="_blank" rel="external">例如</a></p>
<p>###7. 数组(Array)</p>
<p><a href="http://www.runoob.com/ruby/ruby-array.html" target="_blank" rel="external">注意内建方法</a></p>
<p><em>要注意字符串的unpack和数组的pack方法</em></p>
<p>###8. 哈希(Hash)<br>哈希(Hash)没有特定的顺序,<em>当访问hash中的键值不存在的时候,将返回默认值</em></p>
<p>###9. 时间&amp;日期<br><em>Time</em>类</p>
<p>###10. Range</p>
<pre><code>(1..5)        #==&gt; 1, 2, 3, 4, 5
(1...5)       #==&gt; 1, 2, 3, 4
(&apos;a&apos;..&apos;d&apos;)    #==&gt; &apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;
</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"></div><div class="line">$, =<span class="string">", "</span>   <span class="comment"># Array 值分隔符</span></div><div class="line">range1 = (<span class="number">1</span>..<span class="number">10</span>).to_a</div><div class="line">range2 = (<span class="string">'bar'</span>..<span class="string">'bat'</span>).to_a</div><div class="line"></div><div class="line">puts <span class="string">"<span class="subst">#&#123;range1&#125;</span>"</span></div><div class="line">puts <span class="string">"<span class="subst">#&#123;range2&#125;</span>"</span></div></pre></td></tr></table></figure>
<p>输出    </p>
<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
[&quot;bar&quot;, &quot;bas&quot;, &quot;bat&quot;]
</code></pre><p>###11. 迭代器</p>
<p>迭代指的是重复做相同的事</p>
<p><strong>each</strong></p>
<p>each迭代器总和一个块关联,它向块返回每一个值</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"></div><div class="line">ary = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line">ary.each <span class="keyword">do</span> <span class="params">|i|</span></div><div class="line">   puts i</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><strong>collect</strong></p>
<p>collect不需要总是和一个块关联,collect方法返回整个集合</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"></div><div class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line">b = Array.new</div><div class="line">b = a.collect&#123; <span class="params">|x|</span>x &#125;</div><div class="line">puts b</div></pre></td></tr></table></figure>
<p>###12. Ruby文件的输入和输出<br><strong>输入 输出</strong></p>
<p>Ruby提供一整套I/o方法,在内核中实现.例如<em>puts(和print的区别是光标移动到下一行) putc print(和puts的区别是光标移动到最后)</em>等等</p>
<p><strong>打开关闭文件</strong></p>
<ul>
<li>File.new<ul>
<li>您可以使用 File.new 方法创建一个 File 对象用于读取、写入或者读写，读写权限取决于 mode 参数。最后，您可以使用 File.close 方法来关闭该文件。</li>
</ul>
</li>
<li><p>File.open</p>
<ul>
<li>您可以使用 File.open 方法创建一个新的 file 对象，并把该 file 对象赋值给文件。但是，File.open 和 File.new 方法之间有一点不同。不同点是 File.open 方法可与块关联，而 File.new 方法不能。</li>
<li>| 模式 | &nbsp;描述 |<br>| — |:—- |<br>| r  | 只读模式 |<br>| r+ | 读写模式,指针 |<br>| w | 只写模式,文件存在则重写 |<br>| w+ | 读写模式,文件存在,读写译存在文件 |<br>| a | 只写模式,如果文件存在,文件是追加模式 |<br>| a+ | 读写模式,如果文件存在,文件是追加模式 |</li>
</ul>
</li>
<li><p>sysread</p>
<ul>
<li>用于简单 I/O 的方法也可用于所有 file 对象。所以，gets 从标准输入读取一行，aFile.gets 从文件对象 aFile 读取一行。但是，I/O 对象提供了访问方法的附加设置，为我们提供了便利。</li>
<li>您可以使用方法 sysread 来读取文件的内容。当使用方法 sysread 时，您可以使用任意一种模式打开文件。</li>
</ul>
</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line">aFile = File.new(<span class="string">"input.txt"</span>, <span class="string">"r"</span>)</div><div class="line"> <span class="keyword">if</span> aFile</div><div class="line"> content = aFile.sysread(<span class="number">20</span>)</div><div class="line"> puts content</div><div class="line"> <span class="keyword">else</span></div><div class="line"> puts <span class="string">"Unable to open file!"</span></div><div class="line"> <span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>以上语句将输入文件的头20个字符,文件指针放置在文件中的第21个字符的位置.</p>
<ul>
<li>syswrite</li>
</ul>
<p>您可以使用方法 syswrite 来向文件写入内容。当使用方法 syswrite 时，您需要以写入模式打开文件。</p>
<ul>
<li><p>each_byte方法<br><br>用于迭代字符串的每一个字符</p>
</li>
<li><p>IO.readlines方法<br>逐行读入</p>
</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line">arr = IO.readlines(<span class="string">"input.txt"</span>)</div><div class="line">puts arr[<span class="number">0</span>]</div><div class="line">puts arr[<span class="number">1</span>]</div></pre></td></tr></table></figure>
<p>每一行是一个元素.</p>
<ul>
<li>IO.foreach<br>该方法也逐行返回输出。方法 foreach 与方法 readlines 之间不同的是，方法 foreach 与块相关联。但是，不像方法 readlines，方法 foreach 不是返回一个数组。</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line">IO.foreach(<span class="string">"input.txt"</span>)&#123;<span class="params">|block|</span> puts block&#125;  <span class="comment">#这段代码将把文件 test 的内容逐行传给变量 block，然后输出将显示在屏幕上。</span></div></pre></td></tr></table></figure>
<ul>
<li>File.rename  File.delete<br>文件的重命名和删除</li>
<li>文件查询</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">File::exists?(<span class="string">"file.rb"</span>)<span class="comment">#文件是否存在</span></div><div class="line">File.file?(<span class="string">"text.rb"</span>)<span class="comment">#文件是否是一个文件</span></div><div class="line">File::directory(<span class="string">"text.rb"</span>)<span class="comment">#是否是一个目录</span></div></pre></td></tr></table></figure>
<ul>
<li>文件目录Dir</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Dir.chdir(<span class="string">"/a/b"</span>)<span class="comment">#改变目录</span></div><div class="line">Dir.pwd(<span class="string">"/a/b"</span>)<span class="comment">#获取当前目录</span></div><div class="line">Dir.entries(<span class="string">"/a/b"</span>).join(<span class="string">' '</span>)<span class="comment">#获取当前目录下的文件和目录列表 </span></div><div class="line">Dir[<span class="string">"/a/b/*"</span>]<span class="comment">#同上</span></div></pre></td></tr></table></figure>
<p><a href="http://www.runoob.com/ruby/ruby-file-methods.html" target="_blank" rel="external">File的类及其内建方法</a><br><a href="http://www.runoob.com/ruby/ruby-dir-methods.html" target="_blank" rel="external">Dir的类及其内建方法</a></p>
<ul>
<li>异常捕获</li>
</ul>
<p>语法</p>
<p><pre><br>begin #开始</pre></p>
<p> raise.. #抛出异常</p>
<p>rescue [ExceptionType = StandardException] #捕获指定类型的异常 缺省值是StandardException<br> $! #表示异常信息<br> $@ #表示异常出现的代码位置<br>else #其余异常<br> ..<br>ensure #不管有没有异常，进入该代码块</p>
<p>end #结束<br><br>从 begin 到 rescue 中的一切是受保护的。如果代码块执行期间发生了异常，控制会传到 rescue 和 end 之间的块。<br>对于 begin 块中的每个 rescue 子句，Ruby 把抛出的异常与每个参数进行轮流比较。如果 rescue 子句中命名的异常与当前抛出的异常类型相同，或者是该异常的父类，则匹配成功。<br>如果异常不匹配所有指定的错误类型，我们可以在所有的 rescue 子句后使用一个 else 子句。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/ruby</span></div><div class="line"></div><div class="line"><span class="keyword">begin</span>  </div><div class="line">  raise <span class="string">'A test exception.'</span>  </div><div class="line"><span class="keyword">rescue</span> Exception =&gt; e  </div><div class="line">  puts e.message  </div><div class="line">  puts e.backtrace.inspect  </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>输出结果为<br></p>
<blockquote>
<p>A test exception.<br><br>[“main.rb:4”]</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">begin</span> </div><div class="line">   <span class="comment">#.. 过程 </span></div><div class="line">   <span class="comment">#.. 抛出异常</span></div><div class="line"><span class="keyword">rescue</span> </div><div class="line">   <span class="comment">#.. 处理错误</span></div><div class="line"><span class="keyword">else</span></div><div class="line">   <span class="comment">#.. 如果没有异常则执行</span></div><div class="line"><span class="keyword">ensure</span> </div><div class="line">   <span class="comment">#.. 最后确保执行</span></div><div class="line">   <span class="comment">#.. 这总是会执行</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><strong>使用 $! 变量可以捕获抛出的错误消息。</strong></p>
<p><strong>Catch 和 Throw</strong></p>
<p>raise 和 rescue 的异常机制能在发生错误时放弃执行，有时候需要在正常处理时跳出一些深层嵌套的结构。此时 catch 和 throw 就派上用场了。<br>catch 定义了一个使用给定的名称（可以是 Symbol 或 String）作为标签的块。块会正常执行知道遇到一个 throw。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">promptAndGet</span><span class="params">(prom)</span></span></div><div class="line">  print prom</div><div class="line">  res = readline.chomp</div><div class="line">  throw <span class="symbol">:quitRequested</span> <span class="keyword">if</span> res == <span class="string">"!"</span></div><div class="line">  <span class="keyword">return</span> res</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">catch <span class="symbol">:quitRequested</span> <span class="keyword">do</span></div><div class="line">  name = promptAndGet(<span class="string">"Name: "</span>) <span class="comment">#从此处开始执行</span></div><div class="line">  age = promptAndGet(<span class="string">"Age: "</span>)</div><div class="line">  sex = promptAndGet(<span class="string">"Sex: "</span>)</div><div class="line">  <span class="comment"># ..</span></div><div class="line">  <span class="comment"># 处理信息</span></div><div class="line"><span class="keyword">end</span></div><div class="line">promptAndGet(<span class="string">"Name:"</span>)</div></pre></td></tr></table></figure>
<p>上面的程序需要人工交互,程序将从catch 定义的块开始执行,直到遇到 throw才会终止.</p>

	
	
	
	
</div>
				
				

                <!-- Post Comments -->
                


            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
    <!-- Prev Nav -->
    
        <a href="/2015/11/03/ruby-gaojibiancheng/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2015/10/30/webview-chromium/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>
        </div>
    </div>

				
				
					<!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay "></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored  sidebar-fixed-left" role="navigation">
	<div id="sidebar-main">
	    <!-- Sidebar Header -->
		<div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
    <i class="material-icons">clear_all</i>
    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="yunfengsa's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        proljl1991@email.com
        <b class="caret"></b>
    </a>
</div>

		<!-- Sidebar Navigation  -->
		<ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
			
                <li>
                    <a href="#" target="_blank" title="Email Me">
						<i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    <li id="sidebar-first-li">
        <a href="/" target="_self">
            <i class="material-icons sidebar-material-icons">home</i>
             主页
        </a>
    </li>

    <!-- I'm Feeling Lucky -->
<!--
    <li class="dropdown">
        <a href="" target="_self">
            <i class="material-icons sidebar-material-icons">explore</i>
             sidebar.imlucky
        </a>
    </li>
-->

	
    <!-- Archives  -->
    <li class="dropdown">
        <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
            <i class="material-icons sidebar-material-icons">inbox</i>
             归档
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li>
            <a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">五月 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/01/">一月 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/12/">十二月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/11/">十一月 2015<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/10/">十月 2015<span class="sidebar_archives-count">12</span></a>
        </ul>
    </li>

    <!-- Divider -->
    <li class="divider"></li>


    <!-- Pages  -->
	
		<li>
			<a href="/links" title="关注站点">
				关注站点
			</a>
		</li>
	
		<li>
			<a href="/about" title="关于我">
				关于我
			</a>
		</li>
	
		<li>
			<a href="/gallery" title="My Gallery">
				My Gallery
			</a>
		</li>
	

    <!-- Article Numebr  -->
    <li>
        <a href="/archives">
             文章总数
             <span class="sidebar-badge">33</span>
        </a>
    </li>
</ul>

		<!-- Sidebar Divider -->
		<div class="sidebar-divider"></div>

		<!-- Sidebar Footer -->
		<!-- 
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持。 :) 
-->

<!-- Theme Material -->
<a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
	<div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		主题 - Material
		<span class="sidebar-badge badge-circle">i</span>
	</div>
</a>

<!-- Help & Support -->
<!--
<a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		sidebar.help
		<span class="mdl-button__ripple-container">
			<span class="mdl-ripple"></span>
		</span>
	</div>
</a>
-->

<!-- Feedback -->
<!--
<a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.feedback
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>
-->

<!-- Abount Theme -->
<!--
<a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.about_theme
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>-->

	</div>
    
    <!-- Sidebar Sponsor -->
    


</aside>

				
				
				
					<!-- Footer Top Button -->
					<div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>
				
				
				<!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
	
	
		<!-- Paradox Footer Left Section -->
		<div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
    <a href="https://twitter.com/yunfengsa" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.png);">
        <span class="visuallyhidden">Twitter</span>
    </button></a>
    
    
    <!-- Facebook -->
    
    
    
    <!-- Google + -->
    
    
    
    <!-- Weibo -->
    
    
    
    <!-- Instagram -->
    
    
    
    <!-- Tumblr -->
    
    
    
    <!-- Github -->
    
    <a href="github.com/yunfengsa" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.png);">
        <span class="visuallyhidden">Github</span>
    </button></a>
    
</div>


		<!--Copyright-->
		<div id="copyright">Copyright&nbsp;©&nbsp;<script type="text/javascript">var fd = new Date();document.write(fd.getFullYear());</script>&nbsp;云枫飒的笔记BLOG</div>

		<!-- Paradox Footer Right Section -->

		<!-- 
		I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright.
		It will not impact the appearance and can give developers a lot of support :)

		很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
		它不会影响美观并可以给开发者很大的支持。 :) 
		-->

		<div class="mdl-mini-footer--right-section">
			<div>
				<div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
				<div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
			</div>
		</div>
	
    
</footer>
                
				<!-- Import File -->
<script src="/js/highlight.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>











<!-- Swiftye -->


<!-- Local Search-->


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $(".post-toc-wrap").parent(".mdl-menu__container").css("position", "fixed");
    });
</script>

<!-- MathJax Load-->

            </main>
        </div>
		
    </body>
		
	
</html>
